{
  "timestamp":"%{begin:%Y-%m-%dT%H:%M:%S}t",
  "action":"%{json.escape(urldecode(subfield(req.url.qs, "action", "&")))}V",
  "category":"%{json.escape(urldecode(subfield(req.url.qs, "category", "&")))}V",
  "request_id":"%{digest.hash_sha256(req.url)}V",
  "ingestly_id":"%{json.escape(if(req.http.Cookie:ingestlyId, req.http.Cookie:ingestlyId, subfield(req.url.qs, "ingestlyId", "&")))}V",
  "root_id":"%{json.escape(urldecode(subfield(req.url.qs, "rootId", "&")))}V",
  "since_init_ms":"%{if(subfield(req.url.qs, "sinceInitMs", "&"), subfield(req.url.qs, "sinceInitMs", "&"), "-1")}V",
  "since_prev_ms":"%{if(subfield(req.url.qs, "sincePrevMs", "&"), subfield(req.url.qs, "sincePrevMs", "&"), "-1")}V",
  "client_ip":"%{req.http.Fastly-Client-IP}V",
  "user_agent":"%{json.escape(req.http.User-Agent)}V",
  "user_id":"%{json.escape(urldecode(subfield(req.url.qs, "userId", "&")))}V",
  "user_status":"%{json.escape(urldecode(subfield(req.url.qs, "userStatus", "&")))}V",
  "user_attr":"%{json.escape(urldecode(subfield(req.url.qs, "userAttr", "&")))}V",
  "page_url":"%{json.escape(urldecode(subfield(req.url.qs, "pageUrl", "&")))}V",
  "page_referrer":"%{json.escape(urldecode(subfield(req.url.qs, "pageReferrer", "&")))}V",
  "page_title":"%{json.escape(urldecode(subfield(req.url.qs, "pageTitle", "&")))}V",
  "page_attr":"%{json.escape(urldecode(subfield(req.url.qs, "pageAttr", "&")))}V",
  "content_id":"%{json.escape(urldecode(subfield(req.url.qs, "contentId", "&")))}V",
  "content_headline":"%{json.escape(urldecode(subfield(req.url.qs, "contentHeadline", "&")))}V",
  "content_status":"%{json.escape(urldecode(subfield(req.url.qs, "contentStatus", "&")))}V",
  "content_attr":"%{json.escape(urldecode(subfield(req.url.qs, "contentAttr", "&")))}V",
  "viewport_height":"%{if(subfield(req.url.qs, "viewportHeight", "&"), subfield(req.url.qs, "viewportHeight", "&"), "-1")}V",
  "viewport_width":"%{if(subfield(req.url.qs, "viewportWidth", "&"), subfield(req.url.qs, "viewportWidth", "&"), "-1")}V",
  "screen_height":"%{if(subfield(req.url.qs, "screenHeight", "&"), subfield(req.url.qs, "screenHeight", "&"), "-1")}V",
  "screen_width":"%{if(subfield(req.url.qs, "screenWidth", "&"), subfield(req.url.qs, "screenWidth", "&"), "-1")}V",
  "screen_orientation":"%{json.escape(urldecode(subfield(req.url.qs, "screenOrientation", "&")))}V",
  "device_type":"%{json.escape(urldecode(subfield(req.url.qs, "deviceType", "&")))}V",
  "device_os":"%{json.escape(urldecode(subfield(req.url.qs, "deviceOs", "&")))}V",
  "device_platform":"%{json.escape(urldecode(subfield(req.url.qs, "devicePlatform", "&")))}V",
  "timing_interactive":"%{if(subfield(req.url.qs, "timingInteractive", "&"), json.escape(subfield(req.url.qs, "timingInteractive", "&")), "-1")}V",
  "timing_dcl":"%{if(subfield(req.url.qs, "timingDcl", "&"), json.escape(subfield(req.url.qs, "timingDcl", "&")), "-1")}V",
  "timing_complete":"%{if(subfield(req.url.qs, "timingComplete", "&"), json.escape(subfield(req.url.qs, "timingComplete", "&")), "-1")}V",
  "page_height":"%{if(subfield(req.url.qs, "pageHeight", "&"), subfield(req.url.qs, "pageHeight", "&"), "-1")}V",
  "scroll_depth":"%{if(subfield(req.url.qs, "scrollDepth", "&"), subfield(req.url.qs, "scrollDepth", "&"), "-1")}V",
  "scroll_unit":"%{json.escape(subfield(req.url.qs, "scrollUnit", "&"))}V",
  "click_tag":"%{json.escape(urldecode(subfield(req.url.qs, "clickTag", "&")))}V",
  "click_id":"%{json.escape(urldecode(subfield(req.url.qs, "clickId", "&")))}V",
  "click_class":"%{json.escape(urldecode(subfield(req.url.qs, "clickClass", "&")))}V",
  "click_path":"%{json.escape(urldecode(subfield(req.url.qs, "clickPath", "&")))}V",
  "click_link":"%{json.escape(urldecode(subfield(req.url.qs, "clickLink", "&")))}V",
  "click_attr":"%{json.escape(urldecode(subfield(req.url.qs, "clickAttr", "&")))}V",
  "custom_attr":"%{json.escape(urldecode(subfield(req.url.qs, "customAttr", "&")))}V",
  "is_tls":%{if(req.is_ssl, "true", "false")}V,
  "is_ipv6":%{if(req.is_ipv6, "true", "false")}V,
  "request_accept_language":"%{json.escape(req.http.Accept-Language)}V",
  "request_accept_charset":"%{json.escape(req.http.Accept-Charset)}V",
  "request_referer":"%{json.escape(req.http.Referer)}V",
  "geo_continent_code":"%{client.geo.continent_code}V",
  "geo_region":"%{client.geo.region}V",
  "geo_country_name":"%{client.geo.country_name}V",
  "geo_country_code":"%{client.geo.country_code}V",
  "geo_city":"%{client.geo.city}V",
  "geo_latitude":"%{client.geo.latitude}V",
  "geo_longitude":"%{client.geo.longitude}V",
  "geo_gmt_offset":"%{client.geo.gmt_offset}V",
  "geo_conn_speed":"%{client.geo.conn_speed}V",
  "server_datacenter":"%{server.datacenter}V",
  "server_region":"%{server.region}V"
}
